<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bigfoot Sightings </title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    "This is just filler text"
    <select id="selDataset" onchange="optionChanged(this.value)"></select>
    <div id="pie"></div>
    <script>
            var url = "/names"
            Plotly.d3.json(url,function(error,response){
                if(error) console.log(error)
                var dropdown = document.getElementById("selDataset");
    
                for(var i = 0; i< response.length;i++){
                    var elements = document.createElement("option");
                    var arr = response[i];
                    elements.textContent = arr;
                    elements.value = arr;
                    dropdown.appendChild(elements);
            };
        });
    
        function optionChanged(route) {
                console.log(route);
                Plotly.d3.json('/samples'+`/${route}`,function(error,response){
                    var trace = {
                    labels : response.otu_ids,
                    values : response.sample_values,
                    type : 'pie'
                    };
                    var data = [trace];
                    var PIE = document.getElementById("pie");
                    Plotly.newPlot('pie',data)
            });
        }
    </script>
    
    
</body>
</html>