<!-- NEEDS FURTHER EDITING -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bigfoot Sightings </title>
</head>
<body>
    "This is just filler text"
    <select id="selDataset" onchange="optionChanged(this.value)"></select>
    <div id="pie"></div>
    <script>
            var url = "/names"
            Plotly.d3.json(url,function(error,response){
                if(error) console.log(error)
                var dropdown = document.getElementById("selDataset");
    
                for(var i = 0; i< response.length;i++){
                    var elements = document.createElement("option");
                    var arr = response[i];
                    elements.textContent = arr;
                    elements.value = arr;
                    dropdown.appendChild(elements);
            };
                // var trace = {
                //     labels:response,
                //     values:
                // }
            // var data = [response];
                var layout = { margin: { t: 30, b:100 } }
                Plotly.plot("pie", response, layout)
        });
    
        function updatePlotly(newdata) {
                var pie = document.getElementById('pie');
                Plotly.restyle(pie, 'x', [newdata.x])
                Plotly.restyle(pie, 'y', [newdata.y])
            }

        function optionChanged(route) {
                console.log(route);
                // Plotly.d3.json(`/${route}`, function(error, data) {
                //     console.log("newdata", data);
                //     updatePlotly(data);
                // });
                window.location.replace('metadata'+`/${route}`);
            }
    </script>
    
    
</body>
</html>
